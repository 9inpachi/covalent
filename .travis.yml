language: node_js
sudo: required
dist: trusty
env:
  global:
   # The next declaration is the encrypted COVERITY_SCAN_TOKEN, created via the "travis encrypt" command using the project repos public key
   - secure: "BVSHMDG2ovpL1iZaFLrWcmLuTHMshyWCHBtfyNYpz8ua2WVyqsAX2/2NtFO2DXj+6gzzi51PcBRdeSGc2VOcoM0Hxo9FidlseAOcXJuECWaCc2vWIxr6Tyxrvsyb/JdLHP55am8iad3Ira5K2EWUzCEa0uNKkKeBj6DM1UKsoefSTYvdXV0capibTHJCRows4iEYxfFnNjsum0OBbCNKdo6l7S6YHMarS2lMQU8lUmUEgga5Ll+gJpGJAvcC1m87+oRDjisR4dECXTo5xru6gC/ARlL08vWbS62xrD/LgONG2K2zlZ1vfBQ+KZ7+s6PK5aWusdm6ikfSDSVtyRvf1xk4fB0YyHRFW2b7GV0lNNu+ICS1Rj6Sz87Bcbw1PGs1Reej45Ierg9zLZLQOsHHADSQZXMYMOz/04XjrQKEQfS8ceTn11xzCjVuEcaF3TD7jGAR1eZwov7oiEW2niuJMfNafgBeJQPChNWLcm+fXT7fw7BGsBLusBQLMZBfZfRuXkNaSxLOvhVSaTys/xfDgPEOYQhLQ8X2SYNJ6mjpef0p4xXaa4akFaK0j/DR/zcIrnL12hN1X0UEDeS6HcvygGQjDAz/FnGB2GFn3qIEI8aj1Q+tQdLDATvShT21VWTIYlK6F2g9hS7vLDzbIo5wMqlm/CcpdniPDgecMJofSfU="
before_install:
  - echo -n | openssl s_client -connect scan.coverity.com:443 | sed -ne '/-BEGIN CERTIFICATE-/,/-END CERTIFICATE-/p' | sudo tee -a /etc/ssl/certs/ca-
addons:
  coverity_scan:
    project:
      name: "Teradata/covalent"
      description: "Covalent: UI Platform based on Angular-Material"
    notification_email: jeremy.smartt@teradata.com
    build_command_prepend: "npm run build:lib"
    build_command: "--no-command --fs-capture-search deploy/"
    branch_pattern: coverity_scan
node_js:
- '10.15.3'
branches:
  only:
    - coverity_scan
jobs:
  include:
    - env: "MODE=coverity"
install:
- npm install
script:
- ./scripts/ci/travis-script.sh
cache:
  directories:
    - ./node_modules/
