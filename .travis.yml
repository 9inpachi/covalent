language: node_js
sudo: required
dist: trusty
env:
  global:
   # The next declaration is the encrypted COVERITY_SCAN_TOKEN, created
   #   via the "travis encrypt" command using the project repo's public key
   - secure: "vIPuOFHpO86NMtemc6W2HL8DfayXYeIkWOoRdCnrCbmr0rIHPIdBYVhqIBVwYvb2KzjzwWfYr1zMeZIw/Ttut0CgsO1RrKn1WrBMtO+SSVW8jTfPDOOeiqeH2ea1QftYPE75WCPnvRVfYm+wjLPE5yP5K70jpJfh8qANes/6tYRkm1CBJZAIcAm0gf5/3++ZThcXZcMcv+28gBlb5GHEct7tT5qHqDGar/LiTBwcNGDqRVqr1fiaduBNrdoGqdyeGp5OSQSUZU3YL/ZfZgNixIsBcEyqY64wHoohhEoUJo/+H5WAlUhsbWjcCzIg8gowhDFnFePdSzwq4DdnTMQVwJIo4WC0DGXW4HhSIPAP6LiKwng45teZessVMsVMDvMZAfpA0cuGaV3V1tQ7IRE1nRoQTxZuulkfZ39G3USAqKHIjCqdg40wnXu4ZY7Xk7L49qSYpuiduH3ransNquy4fbOCIvlOkKjmgtrYpy2Y6YWNA2ZZ+iJmqVV8mkluafyYBHA2F1h9hAuHwnMmGmlZBYnJ0Cxv/gacQhjydy3ox3Tr5EKXzS9pfYbxheC8G0xF2YW/U8AwofRzoAx3otWL7yPiIqMD1evZ0lUJzR17xdrrqLYqoJ0HglJHlCqpyZez+w8FBGhUZMJZ1dksqw5W700FUkAbghmlfPvsQVsn0Tg="
before_install:
  - echo -n | openssl s_client -connect scan.coverity.com:443 | sed -ne '/-BEGIN CERTIFICATE-/,/-END CERTIFICATE-/p' | sudo tee -a /etc/ssl/certs/ca-
addons:
  coverity_scan:
    project:
      name: "Teradata/covalent"
      description: "Covalent: UI Platform based on Angular-Material"
    notification_email: jeremy.smartt@teradata.com
    build_command_prepend: "npm run build:lib"
    build_command: "--no-command --fs-capture-search deploy/"
    branch_pattern: coverity_scan
node_js:
- '10.15.3'
branches:
  only:
    - coverity_scan
jobs:
  include:
    - env: "MODE=coverity"
install:
- npm install
script:
- ./scripts/ci/travis-script.sh
cache:
  directories:
    - ./node_modules/
